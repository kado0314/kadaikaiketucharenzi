<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generated Website</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Tailwind CSSã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¦ã„ã‚‹ãŸã‚ã€ã‚«ã‚¹ã‚¿ãƒ CSSã¯å¤‰æ•°ã‚’ä¸­å¿ƒã«èª¿æ•´ã—ã¾ã™ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Red Theme (Default) */
            --primary: #dc2626; /* Red 600 */
            --secondary: #b91c1c; /* Red 700 */
            --accent: #f87171; /* Red 400 */
            --background-start: var(--primary);
            --background-end: var(--secondary);
            --text-color: white;
            --section-bg: rgba(255, 255, 255, 0.1);
            --card-bg: rgba(255, 255, 255, 0.15);
            --header-footer-bg: rgba(0, 0, 0, 0.3);
            --border-color: var(--accent);
            --link-color: var(--accent);
        }

        .blue-theme {
            /* Blue Theme */
            --primary: #2563eb; /* Blue 600 */
            --secondary: #1d4ed8; /* Blue 700 */
            --accent: #60a5fa; /* Blue 400 */
            --background-start: var(--primary);
            --background-end: var(--secondary);
            --border-color: var(--accent);
            --link-color: var(--accent);
        }

        body {
            background: linear-gradient(135deg, var(--background-start) 0%, var(--background-end) 100%);
            min-height: 100vh;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            color: var(--text-color);
            line-height: 1.6;
            transition: background 0.5s ease;
        }

        header {
            background: var(--header-footer-bg);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--border-color);
        }

        .section {
            background: var(--section-bg);
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        button, .btn {
            background: var(--accent);
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        button:hover, .btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }

        h1, h2, h3 {
            color: var(--text-color);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        a {
            color: var(--link-color);
            transition: color 0.3s ease;
        }

        a:hover {
            color: white;
        }

        .navigation {
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(8px);
        }

        .navigation a {
            transition: background 0.3s ease, color 0.3s ease;
        }

        .navigation a:hover {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .navigation .active {
            background: var(--accent);
            color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
        }

        .card h3 {
            color: var(--link-color);
            text-shadow: none;
        }

        footer {
            background: var(--header-footer-bg);
            backdrop-filter: blur(10px);
            border-top: 2px solid var(--border-color);
        }

        /* AI Advisor Specific Styles */
        #advisor-input {
            width: 100%;
            padding: 1rem;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.4);
            color: white;
            border: 1px solid var(--accent);
            resize: vertical;
        }

        .advisor-output-area {
            margin-top: 1.5rem;
            min-height: 50px;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            white-space: pre-wrap;
        }

        .loading-text {
            display: flex;
            align-items: center;
            gap: 10px;
            font-style: italic;
            opacity: 0.7;
        }

        /* Image Generator Styles */
        #input-image-preview, #generated-image-output {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            border: 2px dashed rgba(255, 255, 255, 0.5);
            min-height: 150px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.2);
        }
        #generated-image-output {
            border: 3px solid var(--accent);
            margin-top: 2rem;
            min-height: 300px; /* å¤§ãã‚ã«è¡¨ç¤º */
        }
        #generated-image-output img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        /* Custom Modal for Alert Replacement */
        .custom-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none; /* åˆæœŸçŠ¶æ…‹ã§ã¯éè¡¨ç¤º */
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: var(--secondary);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            max-width: 400px;
            text-align: center;
            border: 3px solid var(--accent);
        }

    </style>
</head>
<body id="body">
    
    <!-- Custom Modal Structure -->
    <div id="custom-alert-modal" class="custom-modal">
        <div class="modal-content">
            <h3 class="text-xl mb-4" id="modal-title">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</h3>
            <p id="modal-message" class="mb-6">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æœ¬æ–‡</p>
            <button class="btn" onclick="document.getElementById('custom-alert-modal').style.display='none'">é–‰ã˜ã‚‹</button>
        </div>
    </div>

    <header class="container mx-auto px-4 py-8 flex justify-between items-center">
        <h1 class="text-3xl font-bold">ç­‹åŠ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã®ãƒ•ã‚©ãƒ¼ãƒ ã«é–¢ã™ã‚‹è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ</h1>
        <button id="theme-toggle-btn" class="btn text-sm px-4 py-2 flex items-center gap-2">
             <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-paintbrush"><path d="M18.37 2.63L3.63 17.37a.94.94 0 000 1.32l.74.74a.94.94 0 001.32 0L21.37 5.37a.94.94 0 000-1.32l-.74-.74a.94.94 0 00-1.32 0z"/><path d="M7 14l-3 3.5"/><path d="M10 11l-3 3.5"/><path d="M13 8l-3 3.5"/><path d="M16 5l-3 3.5"/><path d="M17.5 10.5L14 14"/></svg>
            ãƒ†ãƒ¼ãƒå¤‰æ›´ (é’ã¸)
        </button>
    </header>

    <nav class="navigation container mx-auto rounded-xl p-4 my-8">
        <div class="flex flex-wrap justify-center gap-4">
            <a href="#importance" class="nav-link rounded-lg font-semibold px-4 py-2" data-target="importance">ãƒ•ã‚©ãƒ¼ãƒ ã®é‡è¦æ€§</a>
            <a href="#tips" class="nav-link rounded-lg font-semibold px-4 py-2" data-target="tips">ç¿’å¾—ã®ãƒ’ãƒ³ãƒˆ</a>
            <a href="#caution" class="nav-link rounded-lg font-semibold px-4 py-2" data-target="caution">ä¸€èˆ¬çš„ãªæ³¨æ„ç‚¹</a>
            <a href="#ai-advisor" class="nav-link rounded-lg font-semibold px-4 py-2" data-target="ai-advisor">AIãƒ•ã‚©ãƒ¼ãƒ ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼</a>
            <a href="#muscle-generator" class="nav-link rounded-lg font-semibold px-4 py-2" data-target="muscle-generator">AIãƒãƒƒã‚¹ãƒ«ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</a>
            <a href="#conclusion" class="nav-link rounded-lg font-semibold px-4 py-2" data-target="conclusion">çµè«–</a>
        </div>
    </nav>

    <main class="container mx-auto px-4">
        <!-- æ—¢å­˜ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ (Introduction, Importance, Tips, Caution) ã¯çœç•¥ -->
        <section id="introduction" class="section rounded-xl mb-8 p-6">
            <p>ç­‹åŠ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ï¼ˆä»¥ä¸‹ã€ç­‹ãƒˆãƒ¬ï¼‰ã«ãŠã„ã¦ã€é©åˆ‡ãªãƒ•ã‚©ãƒ¼ãƒ ã¯ã€åŠ¹æœã®æœ€å¤§åŒ–ã€æ€ªæˆ‘ã®ãƒªã‚¹ã‚¯ä½æ¸›ã€ãã—ã¦ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ç¶­æŒã®ä¸‰ã¤ã®ä¸»è¦ãªå´é¢ã«ãŠã„ã¦æ¥µã‚ã¦é‡è¦ã§ã™ã€‚ã“ã“ã§ã¯ã€ãªãœãƒ•ã‚©ãƒ¼ãƒ ãŒé‡è¦ãªã®ã‹ã€æ­£ã—ã„ãƒ•ã‚©ãƒ¼ãƒ ã‚’ç¿’å¾—ã™ã‚‹ãŸã‚ã®ãƒ’ãƒ³ãƒˆã€ãã—ã¦ä¸€èˆ¬çš„ãªæ³¨æ„ç‚¹ã«ã¤ã„ã¦è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚</p>
        </section>

        <section id="importance" class="section rounded-xl mb-8 p-6">
            <h2 class="text-2xl font-bold mb-4">ãƒ•ã‚©ãƒ¼ãƒ ã®é‡è¦æ€§ ğŸ’ª</h2>
            <article class="card rounded-lg mb-4 p-4">
                <h3 class="text-lg font-semibold mb-2">1. ã‚¿ãƒ¼ã‚²ãƒƒãƒˆç­‹ç¾¤ã¸ã®åŠ¹æœçš„ãªåˆºæ¿€</h3>
                <p>æ­£ã—ã„ãƒ•ã‚©ãƒ¼ãƒ ã¯ã€é›ãˆãŸã„ç‰¹å®šã®ç­‹è‚‰ç¾¤ã«æœ€å¤§é™ã®è² è·ã‚’é›†ä¸­ã•ã›ã‚‹ã“ã¨ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆã§è†ãŒã¤ã¾å…ˆã‚ˆã‚Šã‚‚å‰ã«å‡ºã™ããŸã‚Šã€èƒŒä¸­ãŒä¸¸ã¾ã£ãŸã‚Šã™ã‚‹ã¨ã€å¤§è…¿å››é ­ç­‹ã‚„è‡€ç­‹ã¸ã®åˆºæ¿€ãŒæ¸›å°‘ã—ã€ä»£ã‚ã‚Šã«è†é–¢ç¯€ã‚„è…°éƒ¨ã«éåº¦ãªè² æ‹…ãŒã‹ã‹ã‚Šã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æœŸå¾…ã™ã‚‹ç­‹åŠ›å‘ä¸Šã‚„ç­‹è‚¥å¤§ã®åŠ¹æœãŒå¾—ã‚‰ã‚Œã«ãããªã‚Šã¾ã™ã€‚</p>
            </article>
            <article class="card rounded-lg mb-4 p-4">
                <h3 class="text-lg font-semibold mb-2">2. æ€ªæˆ‘ã®ãƒªã‚¹ã‚¯ä½æ¸›</h3>
                <p>ä¸é©åˆ‡ãªãƒ•ã‚©ãƒ¼ãƒ ã¯ã€é–¢ç¯€ã‚„é­å¸¯ã€è…±ã€ãã—ã¦è„Šæ¤ã«ä¸å¿…è¦ãªã‚¹ãƒˆãƒ¬ã‚¹ã‚’ã‹ã‘ã€æ€ªæˆ‘ã®ãƒªã‚¹ã‚¯ã‚’å¤§å¹…ã«é«˜ã‚ã¾ã™ã€‚ä¾‹ãˆã°ã€ãƒ‡ãƒƒãƒ‰ãƒªãƒ•ãƒˆã§èƒŒä¸­ã‚’çœŸã£ç›´ãã«ä¿ã¦ãªã„å ´åˆã€æ¤é–“æ¿ãƒ˜ãƒ«ãƒ‹ã‚¢ãªã©ã®é‡ç¯¤ãªè…°ã®æ€ªæˆ‘ã«ã¤ãªãŒã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚é©åˆ‡ãªãƒ•ã‚©ãƒ¼ãƒ ã§è¡Œã†ã“ã¨ã§ã€èº«ä½“ãŒæŒã¤æœ¬æ¥ã®å¯å‹•åŸŸå†…ã§å®‰å…¨ã«å‹•ä½œã‚’è¡Œã†ã“ã¨ãŒã§ãã€ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’ç¶™ç¶šçš„ã«è¡Œã†åœŸå°ãŒç¯‰ã‹ã‚Œã¾ã™ã€‚</p>
            </article>
            <article class="card rounded-lg p-4">
                <h3 class="text-lg font-semibold mb-2">3. é•·æœŸçš„ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š</h3>
                <p>æ­£ã—ã„ãƒ•ã‚©ãƒ¼ãƒ ã‚’ç¿’å¾—ã™ã‚‹ã“ã¨ã¯ã€ç­‹è‚‰ã¨ç¥çµŒã®é€£æºï¼ˆç¥çµŒç­‹åŠ¹ç‡ï¼‰ã‚’å‘ä¸Šã•ã›ã€ã‚ˆã‚Šé‡ã„é‡é‡ã‚’æ‰±ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ãŸã‚ã®åŸºç¤ã¨ãªã‚Šã¾ã™ã€‚æœ€åˆã¯è»½ã„é‡é‡ã§ã‚‚æ­£ç¢ºãªãƒ•ã‚©ãƒ¼ãƒ ã‚’å¿ƒãŒã‘ã‚‹ã“ã¨ã§ã€å®‰å®šæ€§ã¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãŒå‘ä¸Šã—ã€çµæœã¨ã—ã¦ã‚ˆã‚Šé«˜ã„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç™ºæ®ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>
            </article>
        </section>

        <section id="tips" class="section rounded-xl mb-8 p-6">
            <h2 class="text-2xl font-bold mb-4">æ­£ã—ã„ãƒ•ã‚©ãƒ¼ãƒ ã‚’ç¿’å¾—ã™ã‚‹ãŸã‚ã®ãƒ’ãƒ³ãƒˆ âœ¨</h2>
            <article class="card rounded-lg mb-4 p-4">
                <h3 class="text-lg font-semibold mb-2">1. è»½ã„é‡é‡ã‹ã‚‰å§‹ã‚ã‚‹</h3>
                <p>æ–°ã—ã„ç¨®ç›®ã‚’å§‹ã‚ã‚‹éš›ã‚„ã€ãƒ•ã‚©ãƒ¼ãƒ ã«è‡ªä¿¡ãŒãªã„å ´åˆã¯ã€éå¸¸ã«è»½ã„é‡é‡ã€ã‚ã‚‹ã„ã¯è‡ªé‡ã‹ã‚‰å§‹ã‚ã‚‹ã“ã¨ãŒä¸å¯æ¬ ã§ã™ã€‚é‡ã„é‡é‡ã‚’æ‰±ã†ã“ã¨ã«å›ºåŸ·ã™ã‚‹ã¨ã€ãƒ•ã‚©ãƒ¼ãƒ ãŒå´©ã‚Œã‚„ã™ããªã‚Šã€æ€ªæˆ‘ã®ãƒªã‚¹ã‚¯ãŒé«˜ã¾ã‚Šã¾ã™ã€‚å®Œå…¨ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã‚‹é‡é‡ã§ã€å‹•ãã‚’æ­£ç¢ºã«åå¾©ç·´ç¿’ã™ã‚‹ã“ã¨ã§ã€ç­‹è‚‰ã«æ­£ã—ã„å‹•ãã‚’è¦šãˆã•ã›ã¾ã™ã€‚</p>
            </article>
            <article class="card rounded-lg mb-4 p-4">
                <h3 class="text-lg font-semibold mb-2">2. é¡ã‚„ãƒ“ãƒ‡ã‚ªã‚’æ´»ç”¨ã™ã‚‹</h3>
                <p>è‡ªåˆ†ã®å‹•ãã‚’å®¢è¦³çš„ã«è¦³å¯Ÿã™ã‚‹ã“ã¨ã¯ã€ãƒ•ã‚©ãƒ¼ãƒ ã®è‡ªå·±ä¿®æ­£ã«éå¸¸ã«å½¹ç«‹ã¡ã¾ã™ã€‚å…¨èº«é¡ã®å‰ã§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã—ãŸã‚Šã€ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§è‡ªåˆ†ã®ãƒ•ã‚©ãƒ¼ãƒ ã‚’æ’®å½±ã—ãŸã‚Šã—ã¦ã€å¾Œã§ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚æ¨å¥¨ã•ã‚Œã‚‹ãƒ•ã‚©ãƒ¼ãƒ ã¨æ¯”è¼ƒã™ã‚‹ã“ã¨ã§ã€æ”¹å–„ç‚¹ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
            </article>
            <article class="card rounded-lg mb-4 p-4">
                <h3 class="text-lg font-semibold mb-2">3. å°‚é–€å®¶ã®æŒ‡å°ã‚’å—ã‘ã‚‹</h3>
                <p>ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼ã‚„çµŒé¨“è±Šå¯ŒãªæŒ‡å°è€…ã‹ã‚‰ç›´æ¥æŒ‡å°ã‚’å—ã‘ã‚‹ã“ã¨ãŒæœ€ã‚‚åŠ¹æœçš„ã§ã™ã€‚å°‚é–€å®¶ã¯ã€ã‚ãªãŸã®ä½“ã®ç‰¹å¾´ã‚„å¯å‹•åŸŸã‚’è€ƒæ…®ã—ã€å€‹åˆ¥ã«æœ€é©ãªãƒ•ã‚©ãƒ¼ãƒ ã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚ã¾ãŸã€èª¤ã£ãŸç™–ã‚’æŒ‡æ‘˜ã—ã€ãã®å ´ã§ä¿®æ­£ã‚’ä¿ƒã—ã¦ãã‚Œã‚‹ãŸã‚ã€åŠ¹ç‡çš„ã«æ­£ã—ã„ãƒ•ã‚©ãƒ¼ãƒ ã‚’ç¿’å¾—ã§ãã¾ã™ã€‚</p>
            </article>
            <article class="card rounded-lg mb-4 p-4">
                <h3 class="text-lg font-semibold mb-2">4. ç­‹è‚‰ã®æ„è­˜ï¼ˆãƒã‚¤ãƒ³ãƒ‰ãƒãƒƒã‚¹ãƒ«ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ï¼‰</h3>
                <p>å‹•ä½œä¸­ã«ã€é›ãˆãŸã„ç­‹è‚‰ãŒã©ã®ã‚ˆã†ã«åç¸®ã—ã€ä¼¸å±•ã—ã¦ã„ã‚‹ã‹ã‚’æ„è­˜ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å˜ã«é‡é‡ã‚’å‹•ã‹ã™ã ã‘ã§ãªãã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆç­‹ç¾¤ã«è² è·ãŒé›†ä¸­ã—ã¦ã„ã‚‹æ„Ÿè¦šã‚’é«˜ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€ãƒ™ãƒ³ãƒãƒ—ãƒ¬ã‚¹ã§ã¯èƒ¸ç­‹ã®åç¸®ã‚’æ„Ÿã˜ãªãŒã‚‰ãƒãƒ¼ã‚’æŠ¼ã—ä¸Šã’ã‚‹ã‚ˆã†ã«æ„è­˜ã—ã¾ã™ã€‚</p>
            </article>
            <article class="card rounded-lg p-4">
                <h3 class="text-lg font-semibold mb-2">5. ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—ã¨ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³</h3>
                <p>ååˆ†ãªã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—ã¯ã€ç­‹è‚‰ã‚„é–¢ç¯€ã®æŸ”è»Ÿæ€§ã‚’é«˜ã‚ã€é©åˆ‡ãªå¯å‹•åŸŸã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã«é‡è¦ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ­£ã—ã„ãƒ•ã‚©ãƒ¼ãƒ ã§å‹•ä½œã‚’é–‹å§‹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å¾Œã®ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³ã¯ã€ç­‹è‚‰ã®ç·Šå¼µã‚’å’Œã‚‰ã’ã€å›å¾©ã‚’ä¿ƒé€²ã—ã¾ã™ã€‚</p>
            </article>
        </section>

        <section id="caution" class="section rounded-xl mb-8 p-6">
            <h2 class="text-2xl font-bold mb-4">ä¸€èˆ¬çš„ãªæ³¨æ„ç‚¹ âš ï¸</h2>
            <article class="card rounded-lg mb-4 p-4">
                <h3 class="text-lg font-semibold mb-2">1. ç—›ã¿ã‚’ç„¡è¦–ã—ãªã„</h3>
                <p>ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ä¸­ã«ç—›ã¿ã‚’æ„Ÿã˜ãŸã‚‰ã€ã™ãã«å‹•ä½œã‚’ä¸­æ­¢ã—ã¦ãã ã•ã„ã€‚ç—›ã¿ã¯ã€ãƒ•ã‚©ãƒ¼ãƒ ãŒé–“é•ã£ã¦ã„ã‚‹ã€ã¾ãŸã¯è² è·ãŒé«˜ã™ãã‚‹å¯èƒ½æ€§ã‚’ç¤ºå”†ã—ã¦ã„ã¾ã™ã€‚ç„¡ç†ã«ç¶šã‘ã‚‹ã“ã¨ã¯ã€æ·±åˆ»ãªæ€ªæˆ‘ã«ã¤ãªãŒã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>
            </article>
            <article class="card rounded-lg mb-4 p-4">
                <h3 class="text-lg font-semibold mb-2">2. å‘¼å¸ã‚’æ„è­˜ã™ã‚‹</h3>
                <p>æ­£ã—ã„å‘¼å¸æ³•ã‚‚ãƒ•ã‚©ãƒ¼ãƒ ã®ä¸€éƒ¨ã§ã™ã€‚ä¸€èˆ¬çš„ã«ã€åŠ›ã‚’å‡ºã™æ™‚ã«æ¯ã‚’åãã€åŠ›ã‚’ç·©ã‚ã‚‹æ™‚ã«æ¯ã‚’å¸ã„ã¾ã™ã€‚å‘¼å¸ã‚’æ­¢ã‚ã¦ã—ã¾ã†ã¨ã€è¡€åœ§ãŒä¸Šæ˜‡ã—ã€ä½“ã¸ã®è² æ‹…ãŒå¢—åŠ ã—ã¾ã™ã€‚</p>
            </article>
            <article class="card rounded-lg p-4">
                <h3 class="text-lg font-semibold mb-2">3. ç„¦ã‚‰ãªã„</h3>
                <p>ç­‹ãƒˆãƒ¬ã®æˆæœã¯ä¸€æœä¸€å¤•ã§å¾—ã‚‰ã‚Œã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æ­£ã—ã„ãƒ•ã‚©ãƒ¼ãƒ ã‚’ç¿’å¾—ã—ã€å®‰å…¨ã«ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’ç¶™ç¶šã™ã‚‹ã“ã¨ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã—ã‚‡ã†ã€‚ç„¡ç†ãªãƒã‚¤ãƒšãƒ¼ã‚¹ã¯æ€ªæˆ‘ã®åŸå› ã¨ãªã‚Šã€é•·æœŸçš„ãªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã®å¦¨ã’ã«ãªã‚Šã¾ã™ã€‚</p>
            </article>
        </section>

        <!-- AIãƒ•ã‚©ãƒ¼ãƒ ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ (å¤‰æ›´ãªã—) -->
        <section id="ai-advisor" class="section rounded-xl mb-8 p-6">
            <h2 class="text-2xl font-bold mb-4">AIãƒ•ã‚©ãƒ¼ãƒ ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ ğŸ¤–</h2>
            <p class="mb-4">ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã®ãƒ•ã‚©ãƒ¼ãƒ ã«é–¢ã™ã‚‹å…·ä½“çš„ãªç–‘å•ã‚„æ‚©ã¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚çµŒé¨“è±Šå¯Œãªãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼ã®è¦–ç‚¹ã‹ã‚‰ã€æ”¹å–„ã®ãŸã‚ã®å®Ÿè·µçš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚</p>
            <div class="card rounded-lg p-4">
                <textarea id="advisor-input" rows="4" placeholder="ä¾‹: ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆã§è†ãŒå†…å´ã«å…¥ã£ã¦ã—ã¾ã†ã®ã¯ãªãœã§ã™ã‹ï¼Ÿæ”¹å–„æ–¹æ³•ã¯ï¼Ÿ" class="mb-4"></textarea>
                <button id="advisor-button" class="btn w-full">ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ä¾é ¼</button>
            </div>
            <div id="advisor-output" class="advisor-output-area">
                <p class="opacity-70">ã“ã“ã«AIã‹ã‚‰ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
            </div>
        </section>

        <!-- æ–°æ©Ÿèƒ½: AIãƒãƒƒã‚¹ãƒ«ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section id="muscle-generator" class="section rounded-xl mb-8 p-6">
            <h2 class="text-2xl font-bold mb-4">AIãƒãƒƒã‚¹ãƒ«ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ ğŸ’ªğŸ”¥</h2>
            <p class="mb-4">ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ã€AIãŒãã®äººç‰©ã®**é¡”ç«‹ã¡ã‚’ç¶­æŒã—ãŸã¾ã¾**ã€è¶…ãƒ ã‚­ãƒ ã‚­ãªä½“æ ¼ã«è‡ªå‹•ã§å¤‰æ›ã—ã€æœªæ¥ã®å§¿ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¾ã™ã€‚ï¼ˆ**`gemini-2.5-flash-image-preview`ãƒ¢ãƒ‡ãƒ«ä½¿ç”¨**ï¼‰</p>
            
            <div class="card rounded-lg p-4">
                <label for="image-upload" class="btn block text-center cursor-pointer mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block mr-2"><path d="M4 14.899V20a2 2 0 002 2h12a2 2 0 002-2v-5.1"/><path d="M15 9l-3-3-3 3"/><path d="M12 2v12"/></svg>
                    ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ (PNG/JPEG)
                </label>
                <input type="file" id="image-upload" accept="image/png, image/jpeg" class="hidden">

                <p class="text-sm opacity-70 mb-2">ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼:</p>
                <div id="input-image-preview" class="mb-6 h-48 w-full border-dashed border-2 flex items-center justify-center">
                    <span class="opacity-50">ç”»åƒãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“</span>
                </div>
                
                <button id="generate-button" class="btn w-full disabled:opacity-50" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="inline-block mr-2"><path d="M12 2a3 3 0 00-3 3v7a3 3 0 006 0V5a3 3 0 00-3-3z"/><path d="M4.5 17a4.9 4.9 0 009 0"/><path d="M17.5 17a4.9 4.9 0 00-9 0"/></svg>
                    ãƒ ã‚­ãƒ ã‚­ç”»åƒã‚’ç”Ÿæˆï¼
                </button>
            </div>
            
            <h3 class="text-xl font-bold mt-8 mb-4">ç”Ÿæˆçµæœ</h3>
            <div id="generated-image-output" class="text-center">
                <span class="opacity-50">ç”Ÿæˆã•ã‚ŒãŸãƒ ã‚­ãƒ ã‚­ç”»åƒãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</span>
            </div>
        </section>


        <section id="conclusion" class="section rounded-xl mb-8 p-6">
            <h2 class="text-2xl font-bold mb-4">çµè«– âœ…</h2>
            <p class="mb-6">çµè«–ã¨ã—ã¦ã€ç­‹ãƒˆãƒ¬ã«ãŠã‘ã‚‹ãƒ•ã‚©ãƒ¼ãƒ ã¯ã€å˜ãªã‚‹æŠ€è¡“çš„ãªè¦ç´ ã§ã¯ãªãã€åŠ¹æœçš„ãªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã¨æ€ªæˆ‘äºˆé˜²ã®åŸºç›¤ã‚’ç¯‰ãæœ€ã‚‚é‡è¦ãªè¦ç´ ã§ã™ã€‚å¸¸ã«æ­£ã—ã„ãƒ•ã‚©ãƒ¼ãƒ ã‚’æ„è­˜ã—ã€å¿…è¦ã«å¿œã˜ã¦å°‚é–€å®¶ã®åŠ©ã‘ã‚’å€Ÿã‚ŠãªãŒã‚‰ã€å®‰å…¨ã§å®Ÿã‚Šã‚ã‚‹ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’ç¶™ç¶šã—ã¾ã—ã‚‡ã†ã€‚</p>
            <!-- alert()ã¯ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ¼ãƒ€ãƒ«ã«ç½®ãæ›ãˆ -->
            <button class="btn" onclick="showCustomAlert('ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ï¼', 'ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’é ‘å¼µã‚Šã¾ã—ã‚‡ã†ï¼\næ­£ã—ã„ãƒ•ã‚©ãƒ¼ãƒ ãŒã€æœ€é«˜ã®æˆæœã¸ã®è¿‘é“ã§ã™ã€‚')">ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–‹å§‹ï¼</button>
        </section>
    </main>

    <footer class="container mx-auto px-4 py-6 text-center">
        <p>&copy; 2023 ç­‹åŠ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ•ã‚©ãƒ¼ãƒ ãƒ¬ãƒãƒ¼ãƒˆ</p>
    </footer>

    <script>
        // --- å¿…é ˆå®šæ•°ã¨å¤‰æ•° ---
        const apiKey = "AIzaSyB_4uPMKW57fA329SvfEF9KFdfWXdmVL0A"; // ã“ã“ã«ã‚ãªãŸã®Gemini APIã‚­ãƒ¼ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„
        let uploadedImageBase64 = null;
        let uploadedMimeType = null;
        
        // --- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã¨å®šæ•° ---

        // ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤ºé–¢æ•°
        function showCustomAlert(title, message) {
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-message').textContent = message;
            document.getElementById('custom-alert-modal').style.display = 'flex';
        }

        // Exponential Backoffä»˜ãFetché–¢æ•°
        async function fetchWithRetry(url, options, maxRetries = 5) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status === 429) { // Rate limit handling
                        throw new Error(`Rate Limit Exceeded (429). Retrying...`);
                    }
                    if (!response.ok) {
                        const errorBody = await response.json();
                        throw new Error(`HTTP error! status: ${response.status}. Details: ${errorBody.error?.message || 'Unknown error'}`);
                    }
                    return response;
                } catch (error) {
                    if (i === maxRetries - 1 || !error.message.includes('Rate Limit Exceeded')) {
                         // console.error(`Fetch attempt ${i + 1} failed: ${error.message}`);
                         if (i === maxRetries - 1) throw error;
                    }
                    const delay = Math.pow(2, i) * 2000; // 2s, 4s, 8s...
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }
        
        // --- æ©Ÿèƒ½ 1: AIãƒ•ã‚©ãƒ¼ãƒ ã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒ¼ (ãƒ­ã‚¸ãƒƒã‚¯ç¶­æŒ) ---
        
        const advisorInput = document.getElementById('advisor-input');
        const advisorButton = document.getElementById('advisor-button');
        const advisorOutput = document.getElementById('advisor-output');
        
        const AI_SYSTEM_INSTRUCTION = `
ã‚ãªãŸã¯ä¸–ç•Œã‚¯ãƒ©ã‚¹ã®ç­‹åŠ›ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã®ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼ã§ã™ã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ•ã‚©ãƒ¼ãƒ ã«é–¢ã™ã‚‹å•é¡Œã‚„è³ªå•ã«å¯¾ã—ã€æ€ªæˆ‘ã®ãƒªã‚¹ã‚¯ã‚’æ¸›ã‚‰ã—ã€åŠ¹æœã‚’æœ€å¤§åŒ–ã™ã‚‹ãŸã‚ã®å…·ä½“çš„ã§å®Ÿè·µçš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æ—¥æœ¬èªã§æä¾›ã—ã¦ãã ã•ã„ã€‚
å›ç­”ã¯ç°¡æ½”ã«ã€ç®‡æ¡æ›¸ãã‚’å«ã‚ã¦æœ€å¤§200æ–‡å­—ç¨‹åº¦ã«ã¾ã¨ã‚ã¦ãã ã•ã„ã€‚
`;

        async function getAIAdvice(prompt) {
            if (!apiKey) {
                return "APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã‚³ãƒ¼ãƒ‰ã«ã‚­ãƒ¼ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚";
            }
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: {
                    parts: [{ text: AI_SYSTEM_INSTRUCTION }]
                },
            };

            const options = {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            };

            try {
                const response = await fetchWithRetry(apiUrl, options);
                const result = await response.json();
                
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (text) {
                    return text;
                } else {
                    console.error("AI Response Error:", result);
                    return "ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã®ç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚å…¥åŠ›å†…å®¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚";
                }
            } catch (error) {
                console.error("API Call Failed:", error);
                return `ã‚µãƒ¼ãƒãƒ¼ã¨ã®é€šä¿¡ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚¨ãƒ©ãƒ¼: ${error.message}`;
            }
        }

        advisorButton.addEventListener('click', async () => {
            const prompt = advisorInput.value.trim();
            if (prompt === "") {
                showCustomAlert("å…¥åŠ›ã‚¨ãƒ©ãƒ¼", "ãƒ•ã‚©ãƒ¼ãƒ ã«é–¢ã™ã‚‹è³ªå•ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
                return;
            }

            advisorButton.disabled = true;
            advisorButton.textContent = 'ç”Ÿæˆä¸­...';
            advisorOutput.innerHTML = `<div class="loading-text"><svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> AIãŒãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã¾ã™...</div>`;
            
            const advice = await getAIAdvice(prompt);
            
            advisorOutput.textContent = advice;
            advisorButton.textContent = 'ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ä¾é ¼';
            advisorButton.disabled = false;
        });


        // --- æ©Ÿèƒ½ 4: AIãƒãƒƒã‚¹ãƒ«ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ ---

        const imageUpload = document.getElementById('image-upload');
        const inputImagePreview = document.getElementById('input-image-preview');
        const generateButton = document.getElementById('generate-button');
        const generatedImageOutput = document.getElementById('generated-image-output');

        // ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
        imageUpload.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (!file) return;

            // MIMEã‚¿ã‚¤ãƒ—ã‚’ä¿å­˜
            uploadedMimeType = file.type;
            
            const reader = new FileReader();
            reader.onload = (e) => {
                const base64Data = e.target.result;
                
                // Base64ãƒ‡ãƒ¼ã‚¿ (data:image/jpeg;base64,...) ã®ãƒ˜ãƒƒãƒ€ãƒ¼éƒ¨ã‚’å‰Šé™¤ã—ã€ç´”ç²‹ãªBase64æ–‡å­—åˆ—ã®ã¿ã‚’ä¿å­˜
                uploadedImageBase64 = base64Data.split(',')[1]; 

                // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º
                inputImagePreview.innerHTML = `<img src="${base64Data}" alt="ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ç”»åƒ" class="h-full w-full object-contain p-2">`;
                generateButton.disabled = false;
            };
            reader.onerror = () => {
                showCustomAlert("ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼", "ç”»åƒã®èª­ã¿è¾¼ã¿ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");
                generateButton.disabled = true;
                uploadedImageBase64 = null;
            };
            reader.readAsDataURL(file);
        });

        // ç”»åƒç”Ÿæˆå‡¦ç†
        generateButton.addEventListener('click', async () => {
            if (!uploadedImageBase64) {
                showCustomAlert("ç”»åƒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“", "ãƒ ã‚­ãƒ ã‚­åŒ–ã—ãŸã„ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚");
                return;
            }
            if (!apiKey) {
                showCustomAlert("APIã‚­ãƒ¼ãŒå¿…è¦ã§ã™", "ã‚³ãƒ¼ãƒ‰å†…ã®apiKeyå¤‰æ•°ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚");
                return;
            }

            const model = "gemini-2.5-flash-image-preview"; // Image-to-Imageã«é©ã—ãŸãƒ¢ãƒ‡ãƒ«
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;
            const PROMPT = "å…ƒã®ç”»åƒã«å†™ã£ã¦ã„ã‚‹äººç‰©ã®é¡”ç«‹ã¡ã¨æœè£…ã‚’ä¿æŒã—ãŸã¾ã¾ã€å…¨èº«ã‚’éå¸¸ã«ãƒ ã‚­ãƒ ã‚­ã§ç­‹éª¨éš†ã€…ã¨ã—ãŸä½“æ ¼ã«å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚é«˜è§£åƒåº¦ã§ãƒ•ã‚©ãƒˆãƒªã‚¢ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ãªã‚¹ã‚¿ã‚¤ãƒ«ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚";
            
            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
            generatedImageOutput.innerHTML = `<div class="loading-text flex-col h-full items-center justify-center p-8"><svg class="animate-spin h-8 w-8 text-white mb-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span class="text-lg">AIãŒãƒ ã‚­ãƒ ã‚­ãƒœãƒ‡ã‚£ã‚’ç”Ÿæˆä¸­...</span></div>`;
            generateButton.disabled = true;

            const payload = {
                contents: [
                    {
                        parts: [
                            { text: PROMPT },
                            {
                                inlineData: {
                                    mimeType: uploadedMimeType,
                                    data: uploadedImageBase64
                                }
                            }
                        ]
                    }
                ],
                generationConfig: {
                    // ç”»åƒç”Ÿæˆçµæœã‚’æ±‚ã‚ã‚‹ãŸã‚ã®è¨­å®š
                    responseModalities: ["TEXT", "IMAGE"] 
                }
            };

            const options = {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            };

            try {
                const response = await fetchWithRetry(apiUrl, options);
                const result = await response.json();
                
                const imagePart = result.candidates?.[0]?.content?.parts?.find(p => p.inlineData && p.inlineData.mimeType.startsWith('image/'));
                
                if (imagePart) {
                    const base64Data = imagePart.inlineData.data;
                    const mimeType = imagePart.inlineData.mimeType;
                    const imageUrl = `data:${mimeType};base64,${base64Data}`;
                    
                    generatedImageOutput.innerHTML = `<img src="${imageUrl}" alt="ç”Ÿæˆã•ã‚ŒãŸãƒ ã‚­ãƒ ã‚­ç”»åƒ">`;
                } else {
                    console.error("AI Image Generation Error:", result);
                    // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚Œã°è¡¨ç¤º
                    const errorText = result.candidates?.[0]?.content?.parts?.[0]?.text || "AIã¯ç”»åƒã‚’ç”Ÿæˆã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ç”»åƒã®å†…å®¹ã‚’å¤‰æ›´ã—ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚";
                    generatedImageOutput.innerHTML = `<span class="opacity-70 p-4">${errorText}</span>`;
                }

            } catch (error) {
                console.error("Image API Call Failed:", error);
                generatedImageOutput.innerHTML = `<span class="text-red-400 p-4">ç”»åƒç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚¨ãƒ©ãƒ¼: ${error.message}</span>`;
            } finally {
                generateButton.disabled = false;
            }
        });


        // --- æ©Ÿèƒ½ 2: ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é€£å‹•ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚¤ãƒ©ã‚¤ãƒˆ (å¤‰æ›´ãªã—) ---

        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('main section');
        
        const observerOptions = {
            root: null, 
            rootMargin: '0px 0px -50% 0px', 
            threshold: 0 
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const targetId = entry.target.id;
                const link = document.querySelector(`.nav-link[data-target="${targetId}"]`);

                if (link) {
                    navLinks.forEach(l => l.classList.remove('active'));

                    if (entry.isIntersecting) {
                         link.classList.add('active');
                    }
                }
            });
        }, observerOptions);

        document.querySelectorAll('main section:not(#introduction)').forEach(section => {
            observer.observe(section);
        });

        // --- æ©Ÿèƒ½ 3: ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ (å¤‰æ›´ãªã—) ---

        const bodyElement = document.getElementById('body');
        const themeToggleBtn = document.getElementById('theme-toggle-btn');
        let currentTheme = 'red';

        function toggleTheme() {
            if (currentTheme === 'red') {
                bodyElement.classList.add('blue-theme');
                themeToggleBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-paintbrush"><path d="M18.37 2.63L3.63 17.37a.94.94 0 000 1.32l.74.74a.94.94 0 001.32 0L21.37 5.37a.94.94 0 000-1.32l-.74-.74a.94.94 0 00-1.32 0z"/><path d="M7 14l-3 3.5"/><path d="M10 11l-3 3.5"/><path d="M13 8l-3 3.5"/><path d="M16 5l-3 3.5"/><path d="M17.5 10.5L14 14"/></svg> ãƒ†ãƒ¼ãƒå¤‰æ›´ (èµ¤ã¸)';
                currentTheme = 'blue';
            } else {
                bodyElement.classList.remove('blue-theme');
                themeToggleBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-paintbrush"><path d="M18.37 2.63L3.63 17.37a.94.94 0 000 1.32l.74.74a.94.94 0 001.32 0L21.37 5.37a.94.94 0 000-1.32l-.74-.74a.94.94 0 00-1.32 0z"/><path d="M7 14l-3 3.5"/><path d="M10 11l-3 3.5"/><path d="M13 8l-3 3.5"/><path d="M16 5l-3 3.5"/><path d="M17.5 10.5L14 14"/></svg> ãƒ†ãƒ¼ãƒå¤‰æ›´ (é’ã¸)';
                currentTheme = 'red';
            }
        }

        themeToggleBtn.addEventListener('click', toggleTheme);

    </script>
</body>
</html>
